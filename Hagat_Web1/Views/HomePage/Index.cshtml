@{
    Layout = null;
}

<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover">
    <title>Hagat Defence Technologies</title>
    <link rel="shortcut icon" type="image/png" href="../assets/images/logos/favicon.svg" />
    <link rel="stylesheet" href="~/Studiova-1.0.0/assets/libs/owl.carousel/dist/assets/owl.carousel.min.css">
    <link rel="stylesheet" href="~/Studiova-1.0.0/assets/libs/aos-master/dist/aos.css">
    <link rel="stylesheet" href="~/Studiova-1.0.0/assets/css/styles.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css">
</head>

<body id="top" style="margin:0; padding:0; background-color:#000333;">

    @await Html.PartialAsync("_HeaderPartial")

    <!-- Sayfa Bölümleri -->
    <div id="products-section">
        @await Html.PartialAsync("ProductPartial")
    </div>

    <div id="whatwedo-section">
        @await Html.PartialAsync("WhatWeDoPartial")
    </div>

    <div id="references-section">
        @await Html.PartialAsync("ReferencePartial")
    </div>

    <div id="recentnews-section">
        @await Html.PartialAsync("RecentNewPartial")
    </div>

    <div id="contact-section">
        @await Html.PartialAsync("ContactPartial")
    </div>

    <!-- Scroll to Top Button -->
    <div class="get-template hstack gap-2">
        <button class="btn p-2 round-64 rounded-circle hstack justify-content-center flex-shrink-0"
                id="scrollToTopBtn" style="background-color:#940000;">
            <img src="~/Studiova-1.0.0/assets/images/svgs/rocket-top.svg"
                 alt="Rocket Top" class="img-fluid" style="width:48px; height:48px;">
        </button>
    </div>

    <!-- Scripts -->
    <script src="~/Studiova-1.0.0/assets/libs/jquery/dist/jquery.min.js"></script>
    <script src="~/Studiova-1.0.0/assets/libs/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script src="~/Studiova-1.0.0/assets/libs/owl.carousel/dist/owl.carousel.min.js"></script>
    <script src="~/Studiova-1.0.0/assets/libs/aos-master/dist/aos.js"></script>
    <script src="~/Studiova-1.0.0/assets/js/custom.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.8/dist/iconify-icon.min.js"></script>

    <script>
        // iOS Safari compatibility fixes
        function isIOS() {
            return /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        }

        function isSafari() {
            return /^((?!chrome|android).)*safari/i.test(navigator.userAgent);
        }

        // Header scroll görünürlüğü
        document.addEventListener("DOMContentLoaded", function () {
            const header = document.querySelector(".header");
            
            // Use passive event listener for better performance on iOS
            const scrollHandler = function () {
                const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                if (currentScroll > 250) {
                    header.classList.add("show");
                } else {
                    header.classList.remove("show");
                }
            };
            
            window.addEventListener("scroll", scrollHandler, { passive: true });
        });

        // Smooth scrolling with iOS compatibility
        document.querySelectorAll('nav a[href^="#"]').forEach(anchor => {
            anchor.addEventListener("click", function (e) {
                e.preventDefault();
                const targetId = this.getAttribute("href").substring(1);
                const targetEl = document.getElementById(targetId);

                if (targetEl) {
                    const offsetTop = targetEl.offsetTop - 80;
                    
                    if (isIOS() || isSafari()) {
                        // Use requestAnimationFrame for smoother scrolling on iOS
                        const scrollTo = function() {
                            const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                            const distance = offsetTop - currentScroll;
                            const step = distance / 20;
                            
                            if (Math.abs(distance) > 1) {
                                window.scrollTo(0, currentScroll + step);
                                requestAnimationFrame(scrollTo);
                            } else {
                                window.scrollTo(0, offsetTop);
                            }
                        };
                        scrollTo();
                    } else {
                        window.scrollTo({
                            top: offsetTop,
                            behavior: "smooth"
                        });
                    }
                }
            });
        });

                // Hide scrollToTopBtn only on iOS mobile devices
        document.addEventListener("DOMContentLoaded", function () {
            const scrollBtn = document.getElementById("scrollToTopBtn");
            if (/iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream) {
                scrollBtn.style.display = "none";
            }
        });


        // Scroll to Top with iOS compatibility
        document.getElementById("scrollToTopBtn").addEventListener("click", function () {
            if (isIOS() || isSafari()) {
                const scrollTo = function() {
                    const currentScroll = window.pageYOffset || document.documentElement.scrollTop;
                    if (currentScroll > 0) {
                        window.scrollTo(0, currentScroll - 50);
                        requestAnimationFrame(scrollTo);
                    }
                };
                scrollTo();
            } else {
                window.scrollTo({ top: 0, behavior: "smooth" });
            }
        });

        // Fix iOS viewport height issues
        function setViewportHeight() {
            if (isIOS()) {
                const vh = window.innerHeight * 0.01;
                document.documentElement.style.setProperty('--vh', `${vh}px`);
            }
        }
        
        setViewportHeight();
        window.addEventListener('resize', setViewportHeight);
        window.addEventListener('orientationchange', function() {
            setTimeout(setViewportHeight, 100);
        });
    </script>

    <style>
        /* iOS Safari compatibility fixes */
        :root {
            --vh: 1vh;
        }
        
        /* Fix iOS viewport height issues */
        .min-vh-100 {
            min-height: 100vh;
            min-height: calc(var(--vh, 1vh) * 100);
        }
        
        /* Başlangıçta header gizli */
        .header {
            transform: translateY(-100%);
            transition: transform 0.3s ease-in-out;
            -webkit-transform: translateY(-100%);
            -webkit-transition: -webkit-transform 0.3s ease-in-out;
        }

        /* Scroll sonrası header görünür */
        .header.show {
            transform: translateY(0);
            -webkit-transform: translateY(0);
        }
        
        /* iOS touch improvements */
        .btn, .nav-link, a {
            -webkit-tap-highlight-color: transparent;
            -webkit-touch-callout: none;
            -webkit-user-select: none;
            -khtml-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
        
        /* Fix iOS scrolling momentum */
        body {
            -webkit-overflow-scrolling: touch;
            overflow-scrolling: touch;
        }
        
        /* iOS video fixes */
        video {
            -webkit-playsinline: true;
            -moz-playsinline: true;
            -ms-playsinline: true;
            playsinline: true;
        }
        
        /* Fix iOS font rendering */
        * {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        /* iOS specific fixes for animations */
        @@media screen and (-webkit-min-device-pixel-ratio: 0) {
            .animate-float-logo {
                -webkit-animation: float 3s ease-in-out infinite;
                animation: float 3s ease-in-out infinite;
            }
        }
        
        @@keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }
        
        @@-webkit-keyframes float {
            0%, 100% { -webkit-transform: translateY(0px); }
            50% { -webkit-transform: translateY(-10px); }
        }
    </style>

</body>

</html>

